# Cloud

This folder contains modules and components related to cloud-based operations, such as user management, notifications, and firmware repositories.

---

## Recent Updates

### 2026-01-28
- **MCP Isolation**: MCP services have been moved to the Edge folder to align with edge-related responsibilities.
- **Integration Completed**: Notification and firmware repository services remain in the Cloud folder and have been fully integrated.

---

## ğŸ“‹ æ¦‚è¿°

æœ¬ç›®éŒ„åŒ…å«å¾ WebUI åˆ†é›¢å‡ºä¾†çš„é›²ç«¯/ç¤¾ç¾¤åŠŸèƒ½ï¼Œé€™äº›åŠŸèƒ½å±¬æ–¼ Cloud/Server Layerï¼Œä¸æ‡‰åŒ…å«åœ¨ Edge App ä¸­ã€‚

### ç‚ºä»€éº¼åˆ†é›¢ï¼Ÿ

æ ¹æ“š Server-Edge-Runner ä¸‰å±¤æ¶æ§‹ï¼š
- **Edge Layer**: æœ¬åœ°åŠŸèƒ½ï¼Œé›¢ç·šå¯ç”¨ï¼ˆæ©Ÿå™¨äººæ§åˆ¶ã€æœ¬åœ°è¨­å®šï¼‰
- **Cloud Layer**: é›²ç«¯åŠŸèƒ½ï¼Œéœ€è¦ç¶²è·¯é€£æ¥ï¼ˆç¤¾ç¾¤ã€å…±äº«ã€åˆ†æï¼‰

åˆ†é›¢çš„å¥½è™•ï¼š
1. **æ¸›å° Edge App é«”ç©**: ç§»é™¤ä¸å¿…è¦çš„ä¾è³´
2. **æ¸…æ™°çš„è·è²¬åˆ†é›¢**: Edge å°ˆæ³¨æœ¬åœ°æ§åˆ¶ï¼ŒCloud å°ˆæ³¨ç¤¾ç¾¤èˆ‡å…±äº«
3. **ç¨ç«‹éƒ¨ç½²**: Cloud æœå‹™å¯ä»¥ç¨ç«‹æ“´å±•èˆ‡æ›´æ–°
4. **é›¢ç·šå¯ç”¨**: Edge App ä¸ä¾è³´é›²ç«¯æœå‹™å³å¯é‹è¡Œ

---

## ğŸ“ ç›®éŒ„çµæ§‹

```
Cloud/
â”œâ”€â”€ README.md                    # æœ¬æ–‡ä»¶
â”œâ”€â”€ engagement/                  # ç¤¾ç¾¤äº’å‹•åŠŸèƒ½
â”œâ”€â”€ user_management/            # ç”¨æˆ¶ç®¡ç†ï¼ˆé›²ç«¯ï¼‰
â”œâ”€â”€ firmware_repository/        # å›ºä»¶å€‰åº«
â”œâ”€â”€ notification/               # é€šçŸ¥æœå‹™
â”œâ”€â”€ shared_commands/            # é€²éšæŒ‡ä»¤å…±äº«ï¼ˆâœ… å·²å¯¦ä½œï¼‰
â””â”€â”€ analytics/                  # æ•¸æ“šåˆ†æï¼ˆæœªä¾†ï¼‰
```

---

## ğŸ”„ å·²ç§»å‹•çš„åŠŸèƒ½

### 1. ç¤¾ç¾¤äº’å‹•ï¼ˆEngagementï¼‰

**ä¾†æº**: `WebUI/app/engagement.py`  
**ç›®æ¨™**: `Cloud/engagement/`

åŒ…å«åŠŸèƒ½ï¼š
- è¨è«–å€ï¼ˆPostsï¼‰
- è©•è«–ç³»çµ±ï¼ˆCommentsï¼‰
- é»è®šåŠŸèƒ½ï¼ˆLikesï¼‰
- æ’è¡Œæ¦œï¼ˆLeaderboardï¼‰

### 2. é€šçŸ¥æœå‹™ï¼ˆNotificationï¼‰

**ä¾†æº**: `WebUI/app/email.py`  
**ç›®æ¨™**: `Cloud/notification/`

åŒ…å«åŠŸèƒ½ï¼š
- éƒµä»¶é€šçŸ¥
- å¯†ç¢¼é‡è¨­éƒµä»¶
- ç³»çµ±é€šçŸ¥

### 3. ç”¨æˆ¶ç®¡ç†ï¼ˆUser Managementï¼‰

**å¾…ç§»å‹•åŠŸèƒ½**ï¼š
- ç”¨æˆ¶è¨»å†Šç³»çµ±
- ç¤¾äº¤ç¶²è·¯ï¼ˆFollow/Followersï¼‰
- ç”¨æˆ¶å€‹äººé é¢
- ä¿¡è­½èˆ‡è©•ç´šç³»çµ±

### 4. å›ºä»¶å€‰åº«ï¼ˆFirmware Repositoryï¼‰

**å¾…ç§»å‹•åŠŸèƒ½**ï¼š
- å›ºä»¶ä¸Šå‚³/ä¸‹è¼‰
- ç‰ˆæœ¬ç®¡ç†
- æ›´æ–°æ¨é€

### 5. é€²éšæŒ‡ä»¤å…±äº«ï¼ˆAdvanced Command Sharingï¼‰âœ…

**ç‹€æ…‹**: âœ… å·²å¯¦ä½œå®Œæˆ

**ä¾†æº**: æ–°åŠŸèƒ½  
**ç›®æ¨™**: `Cloud/shared_commands/`

åŒ…å«åŠŸèƒ½ï¼š
- æŒ‡ä»¤ä¸Šå‚³èˆ‡å­˜å„²
- æœå°‹èˆ‡ç¯©é¸
- ä¸‹è¼‰èˆ‡åŒæ­¥
- è©•åˆ†ç³»çµ±
- ç•™è¨€è¨è«–
- ç²¾é¸èˆ‡ç†±é–€æŒ‡ä»¤
- åŒæ­¥æ—¥èªŒ

**ç›¸é—œæ–‡ä»¶**ï¼š
- [shared_commands/README.md](shared_commands/README.md) - API æ–‡ä»¶
- [docs/features/advanced-command-sharing.md](../docs/features/advanced-command-sharing.md) - åŠŸèƒ½èªªæ˜
- [Edge/cloud_sync/README.md](../Edge/cloud_sync/README.md) - Edge åŒæ­¥æ¨¡çµ„

---

## ğŸ—ï¸ é›²ç«¯æœå‹™æ¶æ§‹

### éƒ¨ç½²æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Cloud Services                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           FastAPI / Flask REST API                  â”‚ â”‚
â”‚  â”‚  â€¢ /api/engagement/* - ç¤¾ç¾¤åŠŸèƒ½                     â”‚ â”‚
â”‚  â”‚  â€¢ /api/users/* - ç”¨æˆ¶ç®¡ç†                          â”‚ â”‚
â”‚  â”‚  â€¢ /api/firmware/* - å›ºä»¶å€‰åº«                       â”‚ â”‚
â”‚  â”‚  â€¢ /api/notifications/* - é€šçŸ¥æœå‹™                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                               â”‚
â”‚                          â”‚ HTTPS                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Database (PostgreSQL)                  â”‚ â”‚
â”‚  â”‚  â€¢ Users, Posts, Comments, Likes                    â”‚ â”‚
â”‚  â”‚  â€¢ Firmware Metadata                                â”‚ â”‚
â”‚  â”‚  â€¢ Analytics Data                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         Object Storage (S3/MinIO)                   â”‚ â”‚
â”‚  â”‚  â€¢ Firmware Files                                   â”‚ â”‚
â”‚  â”‚  â€¢ User Avatars                                     â”‚ â”‚
â”‚  â”‚  â€¢ Attachments                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                    HTTPS/WSS
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Edge Applications                      â”‚
â”‚  â€¢ Unified Edge App                                     â”‚
â”‚  â€¢ Electron App (Heavy)                                 â”‚
â”‚  â€¢ PyQt App (Tiny)                                      â”‚
â”‚                                                          â”‚
â”‚  å¯é¸é€£æ¥åˆ°é›²ç«¯æœå‹™ä»¥ç²å–ï¼š                               â”‚
â”‚  - é€²éšæŒ‡ä»¤å…±äº«èˆ‡ä¸‹è¼‰                                     â”‚
â”‚  - å›ºä»¶æ›´æ–°                                              â”‚
â”‚  - ç¤¾ç¾¤äº’å‹•                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### ä½œç‚ºç¨ç«‹é›²ç«¯æœå‹™éƒ¨ç½²

```bash
# å®‰è£ä¾è³´
cd Cloud
pip install -r requirements.txt

# å•Ÿå‹•é›²ç«¯æœå‹™
python -m cloud_service.main

# æˆ–ä½¿ç”¨ Docker
docker-compose up -d
```

### Edge App é€£æ¥åˆ°é›²ç«¯ï¼ˆå¯é¸ï¼‰

```yaml
# unified-edge-app/config.yaml
cloud:
  enabled: true
  api_url: "https://cloud.example.com/api"
  api_key: "your-api-key"
  
  features:
    sync_commands: true      # åŒæ­¥é€²éšæŒ‡ä»¤
    firmware_updates: true   # å›ºä»¶è‡ªå‹•æ›´æ–°
    analytics: false         # ä½¿ç”¨æƒ…æ³åˆ†æ
```

---

## ğŸ“Š åŠŸèƒ½å°ç…§è¡¨

| åŠŸèƒ½ | Edge App | Cloud Service | èªªæ˜ |
|------|----------|---------------|------|
| æ©Ÿå™¨äººæ§åˆ¶ | âœ… | âŒ | æœ¬åœ°å³æ™‚æ§åˆ¶ |
| é€²éšæŒ‡ä»¤å»ºç«‹ | âœ… | âœ… | Edge å»ºç«‹ï¼Œå¯é¸ä¸Šå‚³é›²ç«¯å…±äº« |
| é€²éšæŒ‡ä»¤å…±äº« | âŒ | âœ… | é›²ç«¯å…±äº«èˆ‡è©•åˆ† |
| åŸ·è¡Œç›£æ§ | âœ… | âŒ | æœ¬åœ°ç›£æ§ |
| è¨è«–å€ | âŒ | âœ… | é›²ç«¯ç¤¾ç¾¤åŠŸèƒ½ |
| æ’è¡Œæ¦œ | âŒ | âœ… | é›²ç«¯çµ±è¨ˆ |
| ç”¨æˆ¶è¨»å†Š | ç°¡åŒ–ç‰ˆ | âœ… | Edge ä½¿ç”¨æœ¬åœ°èªè­‰ |
| å›ºä»¶æ›´æ–° | âœ… | âœ… | Edge æœ¬åœ°ç®¡ç†ï¼Œå¯å¾é›²ç«¯ä¸‹è¼‰ |
| éƒµä»¶é€šçŸ¥ | âŒ | âœ… | é›²ç«¯æœå‹™ |

---

## ğŸ” å®‰å…¨è€ƒé‡

### èªè­‰èˆ‡æˆæ¬Š

- **Edge App**: æœ¬åœ°èªè­‰ï¼ˆç°¡åŒ–æˆ–ç„¡èªè­‰ï¼‰
- **Cloud Service**: OAuth2/JWT èªè­‰ï¼Œå®Œæ•´ RBAC

### æ•¸æ“šéš±ç§

- **Edge æ•¸æ“š**: å®Œå…¨æœ¬åœ°ï¼Œä¸ä¸Šå‚³
- **Cloud æ•¸æ“š**: ç”¨æˆ¶åŒæ„å¾Œæ‰ä¸Šå‚³å…±äº«å…§å®¹
- **å¯é¸åŒæ­¥**: ç”¨æˆ¶æ§åˆ¶å“ªäº›æ•¸æ“šåŒæ­¥åˆ°é›²ç«¯

---

## ğŸ“ é·ç§»æŒ‡å—

### å¾ WebUI é·ç§»åŠŸèƒ½åˆ° Cloud

1. **è­˜åˆ¥é›²ç«¯åŠŸèƒ½**:
   ```bash
   # æª¢æŸ¥ WebUI ä¸­çš„ç¤¾ç¾¤åŠŸèƒ½
   grep -r "Post\|Comment\|Follower\|Like" WebUI/app/
   ```

2. **ç§»å‹•æª”æ¡ˆ**:
   ```bash
   # ç§»å‹• Python æ¨¡çµ„
   mv WebUI/app/engagement.py Cloud/engagement/
   
   # ç§»å‹•æ¨¡æ¿
   mv WebUI/app/templates/*post* Cloud/engagement/templates/
   ```

3. **æ›´æ–°å°å…¥è·¯å¾‘**:
   ```python
   # èˆŠè·¯å¾‘
   from WebUI.app.engagement import get_posts
   
   # æ–°è·¯å¾‘
   from Cloud.engagement import get_posts
   ```

4. **æ›´æ–°è³‡æ–™æ¨¡å‹**:
   ```python
   # åˆ†é›¢é›²ç«¯æ¨¡å‹åˆ° Cloud/models.py
   class Post(db.Model):
       # é›²ç«¯å°ˆç”¨æ¨¡å‹
       pass
   ```

---

## ğŸ”„ å¾…è¾¦äº‹é …

- [ ] **Phase 1: åŸºç¤åˆ†é›¢**
  - [x] ç§»å‹• engagement.py
  - [x] ç§»å‹• email.py
  - [x] ç§»å‹•ç›¸é—œæ¨¡æ¿
  - [ ] ç§»å‹•ç”¨æˆ¶ç¤¾äº¤åŠŸèƒ½ï¼ˆFollow/Followersï¼‰
  - [ ] åˆ†é›¢è³‡æ–™æ¨¡å‹ï¼ˆUser, Post, Comment, Likeï¼‰

- [ ] **Phase 2: Cloud API å»ºç«‹**
  - [ ] å»ºç«‹ REST API ç«¯é»
  - [ ] å¯¦ä½œèªè­‰æ©Ÿåˆ¶ï¼ˆOAuth2ï¼‰
  - [ ] å»ºç«‹ API æ–‡ä»¶ï¼ˆOpenAPIï¼‰

- [ ] **Phase 3: Edge â†” Cloud æ•´åˆ**
  - [ ] å¯¦ä½œå¯é¸çš„é›²ç«¯é€£æ¥
  - [ ] é€²éšæŒ‡ä»¤åŒæ­¥åŠŸèƒ½
  - [ ] å›ºä»¶æ›´æ–°æœå‹™

- [ ] **Phase 4: éƒ¨ç½²èˆ‡æ¸¬è©¦**
  - [ ] Docker å®¹å™¨åŒ–
  - [ ] Kubernetes éƒ¨ç½²é…ç½®
  - [ ] è² è¼‰æ¸¬è©¦èˆ‡å„ªåŒ–

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

- [æ¶æ§‹èªªæ˜](../docs/architecture.md)
- [æ¬Šå¨è¦æ ¼](../docs/proposal.md)
- [çµ±ä¸€å¥—ä»¶è¨­è¨ˆ](../docs/UNIFIED_PACKAGE_DESIGN.md)
- [WebUI æ¨¡çµ„èªªæ˜](../WebUI/Module.md)

---

## ğŸ¤ è²¢ç»

å¦‚éœ€æ–°å¢é›²ç«¯åŠŸèƒ½æˆ–æ”¹é€²ç¾æœ‰åŠŸèƒ½ï¼Œè«‹ï¼š

1. åœ¨ `Cloud/` ç›®éŒ„ä¸‹æ–°å¢å°æ‡‰æ¨¡çµ„
2. ç¢ºä¿èˆ‡ Edge App ä¿æŒæ¸…æ™°åˆ†é›¢
3. æä¾› API æ–‡ä»¶èˆ‡ç¯„ä¾‹
4. æ’°å¯«å–®å…ƒæ¸¬è©¦

---

**å»ºç«‹æ—¥æœŸ**: 2025-12-10  
**ç‹€æ…‹**: åˆå§‹ç‰ˆæœ¬  
**ç¶­è­·è€…**: Robot Command Console Team
