---
mode: agent
---

> ä½¿ç”¨è€…ç‚ºä¸­æ–‡ä½¿ç”¨è€…ï¼Œä½†ç‚ºäº†æé«˜ç·¨ç¢¼èˆ‡æ’°å¯«é€Ÿåº¦åå¥½åœ¨ç¨‹å¼ç¢¼ä¸­ä½¿ç”¨è‹±æ–‡ï¼›å› æ­¤è«‹åœ¨ç¨‹å¼ç¢¼å¤–ä»¥ä¸­æ–‡é€²è¡Œæ’°å¯«èˆ‡èªªæ˜ã€‚

## âš ï¸ å¿…è®€ï¼šå°ˆæ¡ˆè¨˜æ†¶

**è²¢ç»å‰å¿…é ˆé–±è®€ï¼š**

| æ–‡ä»¶ | ç”¨é€” | å„ªå…ˆç´š |
|------|------|--------|
| [`docs/proposal.md`](../../../docs/proposal.md) | **æ¬Šå¨è¦æ ¼**ï¼šå°ˆæ¡ˆç›®æ¨™ã€æ¶æ§‹ã€æ¨¡çµ„ã€è³‡æ–™å¥‘ç´„ã€å¯¦ä½œè·¯å¾‘ | ğŸ”´ æœ€é«˜ |
| [`docs/architecture.md`](../../../docs/architecture.md) | ç›®éŒ„çµæ§‹ã€Edge/Server éš”é›¢ã€æ¨¡çµ„è·è²¬ | ğŸŸ  é«˜ |
| [`docs/plans/MASTER_PLAN.md`](../../../docs/plans/MASTER_PLAN.md) | Phase 0-6 è¦åŠƒã€æŠ€è¡“é¸å‹ | ğŸŸ  é«˜ |
| [`docs/PROJECT_MEMORY.md`](../../../docs/PROJECT_MEMORY.md) | æ¶æ§‹æ±ºç­–ã€å…±ç”¨å·¥å…· | ğŸŸ¡ ä¸­ |
| [`docs/development/PYTHON_LINT_GUIDE.md`](../../../docs/development/PYTHON_LINT_GUIDE.md) | Python ç¨‹å¼ç¢¼é¢¨æ ¼èˆ‡ lint ä¿®å¾©ç­–ç•¥ | ğŸŸ¡ ä¸­ | 

> *docs/development ç›®éŒ„å¯èƒ½åŒ…å«æ›´å¤šç¶“é©—ç¸½çµ*
> **è¦æ ¼ç–‘ç¾©ä»¥ `docs/proposal.md` ç‚ºæº–ã€‚**

---

## ä¼ºæœå™¨-é‚Šç·£-åŸ·è¡Œå™¨æ¶æ§‹

> ğŸ“– è©³è¦‹ [`docs/architecture.md`](../../../docs/architecture.md) èˆ‡ [`docs/proposal.md`](../../../docs/proposal.md)

```
ä¼ºæœå™¨ (MCP/WebUI) â†’ é‚Šç·£ (robot_service/electron-app) â†’ åŸ·è¡Œå™¨ (Robot-Console)
                               â†“ å…±ç”¨æ¨¡çµ„ â†“
                            src/common/
```

| å±¤ç´š | ç›®éŒ„ | è·è²¬ |
|------|------|------|
| ä¼ºæœå™¨ | `MCP/`, `WebUI/` | API é–˜é“ã€èªè­‰æˆæ¬Šã€è³‡æ–™æŒä¹…åŒ– |
| é‚Šç·£ | `src/robot_service/`, `electron-app/` | æœ¬åœ°ä½‡åˆ—ã€é›¢ç·šæ”¯æ´ã€LLM/æ’ä»¶æ•´åˆ |
| åŸ·è¡Œå™¨ | `Robot-Console/` | å‹•ä½œåŸ·è¡Œã€å”å®šé©é…ã€å®‰å…¨æ©Ÿåˆ¶ |
| å…±ç”¨ | `src/common/` | JSON æ—¥èªŒã€æ™‚é–“å·¥å…·ã€é…ç½®ã€ç‹€æ…‹å…±äº« |

---

## æ ¸å¿ƒåŸå‰‡

- **æ¨¡çµ„åŒ–**ï¼šMCPã€é€šè¨Šå”å®šã€èªè­‰æˆæ¬Šã€æ©Ÿå™¨äººæŠ½è±¡å„è‡ªç¨ç«‹
- **æ¨™æº–åŒ–å¥‘ç´„**ï¼šæ‰€æœ‰è«‹æ±‚/å›æ‡‰ä½¿ç”¨ JSON Schemaï¼Œå« `trace_id` å…¨éˆè·¯è¿½è¹¤
- **äººé¡å¯ä»‹å…¥**ï¼šæŒ‡ä»¤å¯å¯©æ‰¹ã€æš«åœã€å–æ¶ˆã€è¦†å¯«
- **å®‰å…¨åˆè¦**ï¼šJWT èªè­‰ã€RBAC æˆæ¬Šã€å¯©è¨ˆæ—¥èªŒ
- **ç¨‹å¼ç¢¼å“è³ª**ï¼šéµå¾ª PEP 8 è¦ç¯„ï¼Œä¸å¿½ç•¥ä»»ä½• E/F ç´šåˆ¥ lint å•é¡Œ

---

## é–‹ç™¼æµç¨‹

### æ¸¬è©¦é©…å‹•é–‹ç™¼ï¼ˆTDDï¼‰åŸå‰‡
```
æ’°å¯«æ¸¬è©¦ â†’ åŸ·è¡Œï¼ˆå¤±æ•—ï¼‰â†’ å¯¦ä½œ â†’ åŸ·è¡Œï¼ˆé€šéï¼‰â†’ é‡æ§‹
```

### æ–°å¢åŠŸèƒ½æ­¥é©Ÿ
1. é–±è®€ `docs/proposal.md`ã€`docs/architecture.md`
2. åœ¨ `tests/` å»ºç«‹æ¸¬è©¦æ¡ˆä¾‹
3. å¯¦ä½œåŠŸèƒ½ä¸¦é€šéæ¸¬è©¦
4. åŸ·è¡Œ lint æª¢æŸ¥ï¼š`flake8 src/ MCP/ --max-line-length=120 --select=E,F`
5. æ›´æ–°ç›¸é—œæ–‡ä»¶

### æ–‡ä»¶æ›´æ–°å°ç…§
| è®Šæ›´é¡å‹ | æ›´æ–°æ–‡ä»¶ |
|----------|----------|
| API ç«¯é» | `docs/proposal.md`ã€`openapi.yaml` |
| è³‡æ–™å¥‘ç´„ | `docs/proposal.md`ã€`docs/contract/*.json` |
| æ¶æ§‹èª¿æ•´ | `docs/architecture.md` |
| ç¶“é©—ç¸½çµ | `docs/development/*` |

### æœ€çµ‚æ­¥é©Ÿ
**å®ŒæˆåŠŸèƒ½å¾Œï¼Œå°‡ç¶“é©—ç¸½çµå’Œå°ˆæ¡ˆè¨˜æ†¶æ•´ç†å’Œè¨˜éŒ„è‡³é©ç•¶çš„æ–‡ä»¶ä¸­ï¼Œä¸¦åœ¨ç›¸é—œæ–‡ä»¶ä¸­åŠ å…¥åƒè€ƒé€£çµã€‚**

> **ä»»å‹™é–‹å§‹å‰**ï¼šåƒé–± `docs/PROJECT_MEMORY.md` ç²å–èƒŒæ™¯è³‡è¨Šèˆ‡éå»ç¶“é©—ã€‚

> **æ¯å€‹æ­¥é©Ÿå®Œæˆå¾Œ**ï¼šæ›´æ–° `docs/PROJECT_MEMORY.md`ï¼Œè¨˜éŒ„è®Šæ›´ç´°ç¯€èˆ‡ç¶“é©—æ•™è¨“ã€‚

> **å…¨éƒ¨å®Œæˆå¾Œ**ï¼š
> - æ¿ƒç¸®å°ˆæ¡ˆè¨˜æ†¶ï¼Œä¿ç•™ç¶“é©—æ•™è¨“åŸæ¨£
> - åœ¨ `docs/development/` å»ºç«‹å°ˆé¡Œé–‹ç™¼æŒ‡å—
> - åœ¨ç›¸é—œæ–‡ä»¶ä¸­åŠ å…¥åƒè€ƒé€£çµ

---

## è³‡æ–™å¥‘ç´„æ‘˜è¦

> ğŸ“– å®Œæ•´å®šç¾©è¦‹ [`docs/proposal.md`](../../../docs/proposal.md#è³‡æ–™å¥‘ç´„èˆ‡æ¨™æº–åŒ–æ ¼å¼)

**é€šç”¨æ¬„ä½**ï¼š`trace_id`ã€`timestamp`ã€`actor`ã€`source`ã€`labels`

**å¥‘ç´„é¡å‹**ï¼š
- `CommandRequest`ï¼šæŒ‡ä»¤è«‹æ±‚ï¼ˆå« targetã€paramsã€timeout_msï¼‰
- `CommandResponse`ï¼šåŸ·è¡Œçµæœï¼ˆstatusã€resultã€errorï¼‰
- `EventLog`ï¼šäº‹ä»¶æ—¥èªŒï¼ˆseverityã€categoryã€contextï¼‰

---

## é‚Šç·£å±¤åŠŸèƒ½

> ğŸ“– è©³è¦‹ [`docs/mcp/MCP_LLM_PROVIDERS.md`](../../../docs/mcp/MCP_LLM_PROVIDERS.md)ã€[`docs/mcp/MCP_PLUGIN_ARCHITECTURE.md`](../../../docs/mcp/MCP_PLUGIN_ARCHITECTURE.md)

- **LLM æ•´åˆ**ï¼š`LLMProviderManager` ç®¡ç† Ollama/LM Studio/é›²ç«¯æœå‹™
- **æ’ä»¶æ¶æ§‹**ï¼šCommandPluginã€DevicePluginã€IntegrationPlugin
- **é€²éšæŒ‡ä»¤**ï¼šå‘å¾Œç›¸å®¹ï¼Œè©³è¦‹ [`docs/phase2/ADVANCED_COMMAND_RESPONSIBILITY_CHANGE.md`](../../../docs/phase2/ADVANCED_COMMAND_RESPONSIBILITY_CHANGE.md)
- **ç‹€æ…‹å…±äº«**ï¼š`SharedStateManager` ç®¡ç†æœå‹™é–“ç‹€æ…‹åŒæ­¥èˆ‡äº‹ä»¶é€šè¨Š

---

## å®Œæˆå®šç¾©

- [ ] æœ‰å°æ‡‰ JSON Schema èˆ‡æ–‡ä»¶æ›´æ–°
- [ ] å–®å…ƒæ¸¬è©¦è¦†è“‹åŸºæœ¬å ´æ™¯
- [ ] ç”¢ç”Ÿ EventLog å« trace_id
- [ ] ç„¡ç¡¬ç·¨ç¢¼å¯†é‘°
- [ ] é€šé lint æª¢æŸ¥ï¼ˆç„¡ E/F ç´šåˆ¥å•é¡Œï¼‰

> ğŸ“– å®Œæ•´å®Œæˆå®šç¾©è¦‹ [`docs/proposal.md`](../../../docs/proposal.md#æˆåŠŸæ¨™æº–)

---

## ç›®éŒ„åƒè€ƒ

| æ¨¡çµ„ | æ–‡ä»¶ |
|------|------|
| MCP | `MCP/Module.md` |
| WebUI | `WebUI/Module.md` |
| Robot-Console | `Robot-Console/module.md` |
| å…±ç”¨æ¨¡çµ„ | `src/common/` |
| æ¸¬è©¦ | `tests/` |
| é–‹ç™¼æŒ‡å— | `docs/development/` |

---

## ğŸ“ æŒ‡ä»¤æª”æ¡ˆç›®éŒ„

æ­¤å°ˆæ¡ˆåŒ…å«ç‰¹å®šæª”æ¡ˆé¡å‹çš„ç·¨ç¢¼æŒ‡å¼•ï¼Œå­˜æ”¾æ–¼ `.github/instructions/` ç›®éŒ„ï¼š

- **Python.instructions.md** - Python æª”æ¡ˆæ ¼å¼åŒ–èˆ‡é–‹ç™¼æŒ‡å¼•ï¼ˆé©ç”¨æ–¼ `**/*.py`ï¼‰
- **Markdown.instructions.md** - Markdown æ–‡ä»¶æ’°å¯«è¦ç¯„ï¼ˆé©ç”¨æ–¼ `**/*.md`ï¼‰

é€™äº›æª”æ¡ˆæœƒè¢« GitHub Copilot è‡ªå‹•è­˜åˆ¥ä¸¦å¥—ç”¨åˆ°å°æ‡‰çš„æª”æ¡ˆé¡å‹ã€‚

> **âš ï¸ Windows ç›¸å®¹æ€§æé†’**ï¼š  
> è«‹å‹¿å»ºç«‹åŒ…å« `*`ã€`?`ã€`<`ã€`>`ã€`|`ã€`"`ã€`:` ç­‰ç‰¹æ®Šå­—ç¬¦çš„å¯¦éš›æª”åã€‚  
> `.github/instructions/*.instructions.md` åƒ…æ‡‰ä½œç‚º glob æ¨¡å¼åœ¨ç¨‹å¼ç¢¼ä¸­ä½¿ç”¨ï¼Œè€Œéå¯¦éš›çš„æª”æ¡ˆè·¯å¾‘ã€‚

è©³ç´°èªªæ˜è«‹åƒé–± [instructions/README.md](instructions/README.md)ã€‚

---

**æœ€å¾Œæ›´æ–°**ï¼š2025-12-22 ï½œ **ç‰ˆæœ¬**ï¼šv2.3 ï½œ **ç‹€æ…‹**ï¼šPhase 2 å®Œæˆï¼ŒPhase 3 é€²è¡Œä¸­
