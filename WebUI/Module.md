# WebUI 模組設計說明

本文件依據專案提案（prosposal.md）規劃 WebUI 目錄，作為「機器人指令中介層（MCP 伺服器）」的人機互動介面，強調模組化、可擴充、可監督與安全。

## 目標
WebUI 提供人類操作員與 AI 客戶端的互動入口，支援：
- 指令發送與回應
- 狀態監控與日誌查詢
- 即時介入與監督
確保人機協作安全、可追溯與高可用。

## 模組化架構理念
本 WebUI 採用模組化設計，將各項功能分為獨立模組，包含：
- **指令路由與處理（routes.py）**：負責接收、驗證、分派來自 WebUI/AI 的指令。
- **資料模型（models.py）**：定義機器人、指令、用戶等資料結構。
- **錯誤處理（errors.py）**：統一管理例外與錯誤回報。
- **郵件通知（email.py）**：異常、狀態變更等事件通知。
- **表單驗證（forms.py）**：用戶輸入驗證。
- **設定管理（config.py）**：集中管理系統設定。
- **日誌與監控（建議擴充 logging_monitor.py）**：記錄所有操作、錯誤與事件，支援即時監控。

各模組可獨立開發、測試與維護，便於未來整合新功能或新型機器人。

## 主要功能
- 一致的多客戶端支援（人類 WebUI、AI API）
- 指令驗證、排隊、分派與回應
- 機器人狀態與指令結果監控
- 完整日誌查詢與即時監督介面
- 認證授權與角色權限控管

## 目錄結構簡介
- app/：WebUI 主程式與模組
- templates/：Jinja2 前端模板
- translations/：多語系翻譯檔
- migrations/：資料庫遷移管理

## 實作建議
1. 移除或調整部落格/用戶為主的功能，聚焦指令與機器人管理。
2. 建立統一的資料模型，涵蓋機器人、指令、用戶。
3. 強化日誌、監控與安全性，確保人類可隨時介入。
4. 撰寫完整測試，確保各模組獨立可驗證。

---
如需詳細設計理念與開發步驟，請參閱專案根目錄下的 prosposal.md。
